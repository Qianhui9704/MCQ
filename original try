<script type="text/javascript">  
var result=document.getElementById("result");  
var file=document.getElementById("file");  
  
//判断浏览器是否支持FileReader接口  
if(typeof FileReader == 'undefined'){  
    result.InnerHTML="<p>你的浏览器不支持FileReader接口！</p>";  
    //使选择控件不可操作  
    file.setAttribute("disabled","disabled");  
}  
  
function readAsDataURL(){  
    //检验是否为图像文件  
    var file = document.getElementById("file").files[0];  
    if(!/image\/\w+/.test(file.type)){  
        alert("看清楚，这个需要图片！");  
        return false;  
    }  
    var reader = new FileReader();  
    //将文件以Data URL形式读入页面  
    reader.readAsDataURL(file);  
    reader.onload=function(e){  
        var result=document.getElementById("result");  
        //显示文件  
        result.innerHTML='<img src="' + this.result +'" alt="" />';  
    }  
}  
  
function readAsBinaryString(){  
    var file = document.getElementById("file").files[0];  
    var reader = new FileReader();  
    //将文件以二进制形式读入页面  
    reader.readAsBinaryString(file);  
    reader.onload=function(f){  
        var result=document.getElementById("result");  
        //显示文件  
        result.innerHTML=this.result;  
    }  
}  

var c1 = new Array();
var c2 = new Array();
var c3 = new Array();
var c4 = new Array();
var c5 = new Array();

function readAsText(){  
    var file = document.getElementById("file").files[0];  
    var reader = new FileReader();  
    //将文件以文本形式读入页面  
    reader.readAsText(file);  
    reader.onload=function(f){  
        var result=document.getElementById("result");  
        var data = this.result;
        data = data.split("\n");
        for(var n=0;n<data.length;n++){
            var theline = data[n].split(',');
            c1.push(theline[0]);
            c2.push(theline[1]);
            c3.push(theline[2]);
            c4.push(theline[3]);
            c5.push(theline[4]);
            
        }
//        alert(c1[0]);
//        alert(c2[1]);
//        alert(c3[2]);
        var answers = new Array();
        for(var n=0; n<c1.length;n++){
            var ananswer = new Array();
            ananswer.push(c1[n]);
            ananswer.push(c2[n]);
            ananswer.push(c3[n]);
            ananswer.push(c4[n]);
            answers.push(ananswer);
        }
        alert('all done');
        alert(answers[0][2]);
        alert(answers[1][1]);
        
        
        //显示文件  
        result.innerHTML=this.result;  
        
    }  
} 

   
        
</script>  
<p>  
    <label>请选择一个文件：</label>  
    <input type="file" id="file" />  
    <input type="button" value="读取图像" onclick="readAsDataURL()" />  
    <input type="button" value="读取二进制数据" onclick="readAsBinaryString()" />  
    <input type="button" value="read as questions" onclick="readAsText()" />  
</p>  
<div id="result" name="result"></div>